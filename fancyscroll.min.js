!function($){function FancyScroll(element,settings){var el=$("#document"==$(element)[0].nodeName?"body":element),SELF=this;return SELF.id=i,SELF.name=NAME,SELF.version=VERSION,SELF.element=el,SELF.disabled=!1,SELF.isBody="#document"==el[0].nodeName||"BODY"==el[0].nodeName,SELF.wrapper=el.parent(),SELF.timer=[],i++,logged||(logged=!0,Fancy.version(SELF)),SELF.settings=$.extend({},Fancy.settings[NAME],settings),SELF.direction={},SELF.init(),SELF.addEventListener(),SELF.hideCursor(),SELF.resize(),SELF.position(),SELF}Fancy.require({jQuery:!1,Fancy:"1.0.2"});var i=1,NAME="FancyScroll",VERSION="1.1.1",timer=0,mouse={},logged=!1,MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;FancyScroll.api=FancyScroll.prototype={},FancyScroll.api.version=VERSION,FancyScroll.api.name=NAME,FancyScroll.api.init=function(){var SELF=this;SELF.y=$("<div/>",{id:SELF.name+"-y-"+SELF.id,class:SELF.name+"-rail "+SELF.name+"-y-rail"}),SELF.y.cursor=$("<div/>",{id:SELF.name+"-y-cursor-"+SELF.id,class:SELF.name+"-cursor"}),SELF.x=$("<div/>",{id:SELF.name+"-x-"+SELF.id,class:SELF.name+"-rail "+SELF.name+"-x-rail"}),SELF.x.cursor=$("<div/>",{id:SELF.name+"-x-cursor-"+SELF.id,class:SELF.name+"-cursor"}),SELF.left=SELF.element.scrollLeft(),SELF.top=SELF.element.scrollTop(),SELF.element.addClass(SELF.name+"-element"),!SELF.settings.mobile&&Fancy.mobile?SELF.element.css({overflow:"auto"}):SELF.element.css({overflow:"hidden"}),(!SELF.settings.y||!SELF.settings.mobile)&&Fancy.mobile||(SELF.y.append(SELF.y.cursor),SELF.wrapper.append(SELF.y)),!(!SELF.settings.x||!SELF.settings.mobile)||!Fancy.mobile,SELF.y.cursor.css({background:SELF.settings.cursorColor,position:"relative",right:0,border:SELF.settings.borderColor?"1px solid "+SELF.settings.borderColor:"",borderRadius:SELF.settings.borderRadius,cursor:SELF.settings.cursorCursor}).addClass(SELF.name+"-theme-"+SELF.settings.theme+"-cursor"),SELF.x.cursor.css({background:SELF.settings.cursorColor,position:"relative",top:0,border:SELF.settings.borderColor?"1px solid "+SELF.settings.borderColor:"",borderRadius:SELF.settings.borderRadius,cursor:SELF.settings.cursorCursor}).addClass(SELF.name+"-theme-"+SELF.settings.theme+"-cursor"),SELF.y.css({position:SELF.isBody?"fixed":"absolute",backgroundColor:SELF.settings.railColor,width:SELF.settings.cursorWidth}).addClass(SELF.name+"-theme-"+SELF.settings.theme+"-rail"),SELF.x.css({position:SELF.isBody?"fixed":"absolute",backgroundColor:SELF.settings.railColor,width:SELF.settings.cursorWidth}).addClass(SELF.name+"-theme-"+SELF.settings.theme+"-rail")},FancyScroll.api.showCursor=function(rail){return this.disabled||!(this.ratioY>1)||rail&&"y"!=rail||(this.y.removeClass(this.name+"-mode-"+this.settings.hideMode+"-out").addClass(this.name+"-mode-"+this.settings.hideMode+"-in"),this.settings.autoHide&&this.delay(function(){this.y.cursor.active||this.y.cursor.dragged||this.hideCursor()},1e3)),this.disabled||!(this.ratioX>1)||rail&&"x"!=rail||(this.x.removeClass(this.name+"-mode-"+this.settings.hideMode+"-out").addClass(this.name+"-mode-"+this.settings.hideMode+"-in"),this.settings.autoHide&&this.delay(function(){this.x.cursor.active||this.y.cursor.dragged||this.hideCursor()},1e3)),this},FancyScroll.api.hideCursor=function(){return this.disabled||(this.y.removeClass(this.name+"-mode-"+this.settings.hideMode+"-in").addClass(this.name+"-mode-"+this.settings.hideMode+"-out"),this.x.removeClass(this.name+"-mode-"+this.settings.hideMode+"-in").addClass(this.name+"-mode-"+this.settings.hideMode+"-out")),this},FancyScroll.api.disable=function(){return this.hideCursor(),this.disabled=!0,this.y.hide().removeClass(this.name+"-mode-"+this.settings.hideMode+"-in").addClass(this.name+"-mode-"+this.settings.hideMode+"-in"),this.x.hide().removeClass(this.name+"-mode-"+this.settings.hideMode+"-in").addClass(this.name+"-mode-"+this.settings.hideMode+"-in"),this},FancyScroll.api.enable=function(){var SELF=this;return SELF.disabled=!1,SELF.y.css("display",""),SELF.x.css("display",""),SELF},FancyScroll.api.resize=function(){var SELF=this;return SELF.isBody?SELF.element.wtsY=SELF.element[0].scrollHeight-window.innerHeight:SELF.element.wtsY=SELF.element[0].scrollHeight-SELF.element.outerHeight(),SELF.isBody?SELF.element.wtsX=SELF.element[0].scrollWidth-window.innerWidth:SELF.element.wtsX=SELF.element[0].scrollWidth-SELF.element.outerWidth(),SELF.y.css({top:SELF.element.position().top+parseInt(SELF.element.css("borderTop")||0)+parseInt(SELF.element.css("marginTop")||0),height:SELF.isBody?"100%":SELF.element.innerHeight()}),SELF.x.css({left:SELF.element.position().left+parseInt(SELF.element.css("marginRight")),width:SELF.isBody?"100%":SELF.element.outerWidth()}),SELF.y.cursor.css({height:SELF.y.height()-SELF.y.height()*(SELF.element.wtsY/SELF.element[0].scrollHeight),minHeight:SELF.settings.cursorMinHeight}),SELF.x.cursor.css({width:SELF.element.outerWidth()-SELF.element.outerWidth()*(SELF.element.wtsX/SELF.element[0].scrollWidth),minWidht:SELF.settings.cursorMinHeight}),SELF.moveCursor(),SELF.y.wts=SELF.y.height()-SELF.y.cursor.outerHeight(),SELF.x.wts=SELF.x.width()-SELF.x.cursor.outerWidth(),SELF.ratioY=SELF.element.wtsY/SELF.y.wts,SELF.ratioX=SELF.element.wtsX/SELF.x.wts,SELF.ratioY<1?SELF.y.css("display","none"):SELF.y.css("display",""),SELF.ratioX<1?SELF.x.css("display","none"):SELF.x.css("display",""),SELF},FancyScroll.api.destroy=function(){this.element.removeClass(this.name+"-element"),this.element.css("overflow","").unbind("."+this.name),$(window).unbind("."+this.name),$("html").css({cursor:""}),this.y.remove(),this.x.remove()},FancyScroll.api.addEventListener=function(){function doScroll(e){if(SELF.disabled)e.preventDefault();else if(!SELF.settings.mobile&&Fancy.mobile)SELF.scrollEvents();else{var delta=0;e||(e=window.event),e.wheelDelta?delta=e.wheelDelta/120:e.detail&&(delta=-e.detail/3);var closest=$(e.target).closest("."+SELF.name+"-element"),up=delta>0;if(SELF.settings.preventDefault&&closest.length&&!closest.is(SELF.element)){if(SELF.debug("has fancyscroll"),up&&closest.data("FancyScroll").infinite&&closest.data("FancyScroll").infinite.last.up)return SELF.debug("the "+SELF.name+"-element has infiniteScroll, is currently on way up and is not on top yet"),!0;if(up&&closest.scrollTop())return void SELF.debug("the "+SELF.name+"-element is currently on way up and is not on top yet");if(!up&&closest.scrollTop()<closest[0].scrollHeight-closest.outerHeight())return SELF.debug("the "+SELF.name+"-element is currently on way down and is not on bottom yet"),!0}if("touchmove"==e.type){var currentY=e.touches&&e.touches[0].clientY;up=currentY>=lastY,up?SELF.top&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),SELF.scrollTo(SELF.left,SELF.top-(currentY-lastY))):SELF.top<SELF.element[0].scrollHeight-SELF.element.outerHeight()&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),SELF.scrollTo(SELF.left,SELF.top+(lastY-currentY))),lastY=currentY}else up?SELF.top&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),SELF.scrollTo(SELF.left,SELF.top-SELF.settings.scrollValue*delta)):SELF.top<SELF.element[0].scrollHeight-SELF.element.outerHeight()&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),SELF.scrollTo(SELF.left,SELF.top+SELF.settings.scrollValue*-delta))}}var SELF=this,lastY=0;if(SELF.element.on("mouseenter."+SELF.name,function(){SELF.disabled||(SELF.y.addClass("hovered"),SELF.showCursor())}).on("mouseleave."+SELF.name,function(){SELF.y.removeClass("hovered")}).on("touchstart",function(e){lastY=e.originalEvent.touches[0].clientY}),SELF.element.on("DOMMouseScroll."+this.name+" mousewheel."+this.name+" MozMousePixelScroll."+this.name+" touchmove."+this.name,function(e){doScroll(e.originalEvent)}),SELF.element[0].onmousewheel=SELF.element[0].onmousewheel=doScroll,SELF.y.on("mouseenter."+SELF.name,function(){SELF.y.addClass("hovered"),SELF.y.cursor.active=!0,SELF.showCursor()}).on("mouseleave."+SELF.name,function(){SELF.y.removeClass("hovered"),SELF.y.cursor.active=!1}),SELF.y.on("click."+SELF.name,function(e){e.preventDefault(),e.stopPropagation(),e.target==SELF.y[0]&&SELF.scrollTo(SELF.left,SELF.element[0].scrollHeight*Math.min(100,Math.max(0,100*(e.offsetY-SELF.y.cursor.height()/2)/SELF.y.height()))/100)}),SELF.y.cursor.on("mousedown."+SELF.name,function(e){"use strict";e.preventDefault(),e.stopPropagation(),mouse={},mouse.start=e.clientY,mouse.old=e.clientY,SELF.y.cursor.dragged=!0,SELF.y.cursor.active=!0,$("html").css({cursor:SELF.settings.cursorCursor}),mouse.wts={},mouse.wts.up=mouse.start-parseInt(SELF.y.cursor.css("top"))-2,mouse.wts.down=mouse.start+SELF.y.wts-parseInt(SELF.y.cursor.css("top"))+2,$(document,"body").on("selectstart."+SELF.name,function(event){event.preventDefault()})}),$(window).on("mousemove."+SELF.name,function(e){"use strict";if(SELF.y.cursor.dragged){var wts;wts=SELF.isBody&&!Fancy.isChrome?SELF.wrapper.scrollTop()+SELF.element.wtsY/SELF.y.wts*(e.clientY-mouse.old):SELF.element.scrollTop()+SELF.element.wtsY/SELF.y.wts*(e.clientY-mouse.old),SELF.scrollTo(SELF.left,Math.round(wts)),SELF.resize(),e.clientY>=mouse.wts.up&&e.clientY<=mouse.wts.down&&(mouse.old=e.clientY)}}),$(window).on("mouseup."+SELF.name+" touchend."+SELF.name,function(){"use strict";$(document).unbind("selectstart."+SELF.name),$("html").css({cursor:""}),mouse={},SELF.y.cursor.active=!1,SELF.y.cursor.dragged=!1}),MutationObserver){var observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){SELF.resize(),SELF.position()})});observer.observe(SELF.element[0],{subtree:!1,attributeOldValue:!1,attributes:!0,childList:!0,characterData:!0})}SELF.element.on("DOMAttrModified",function(e){"style"===e.attrName&&(SELF.resize(),SELF.position())})},FancyScroll.api.position=function(){return this.y.css({left:this.element.position().left-this.settings.margin+this.element.outerWidth()-this.y.width()-parseInt(this.element.css("borderRight")||0)+parseInt(this.element.css("marginLeft"))}),this.x.css({top:this.element.position().top-this.settings.margin+this.element.outerHeight()-this.x.height()+parseInt(this.element.css("marginTop"))}),this},FancyScroll.api.scrollTo=function(x,y){function scrollLeft(type){SELF[type].scrollLeft(x),SELF.left=x,SELF.direction.x&&SELF.scrollEvents()}function scrollTop(type){if(SELF.settings.smooth){var speed=SELF.settings.scrollValue/SELF[type][0].scrollHeight*1e4;SELF[type].stop(!0).animate({scrollTop:y},speed,function(){SELF.moveCursor(),SELF.resize(),SELF.showCursor(),SELF.direction.y&&SELF.scrollEvents()})}else SELF[type].scrollTop(y),SELF.moveCursor(),SELF.direction.y&&SELF.scrollEvents();SELF.top=y}var SELF=this;return x<0&&(x=0),y<0&&(y=0),x>SELF.element.wtsX&&(x=SELF.element.wtsX),y>SELF.element.wtsY&&(y=SELF.element.wtsY),x>SELF.left?SELF.direction.x="right":x<SELF.left?SELF.direction.x="left":SELF.direction.x=!1,y>SELF.top?SELF.direction.y="down":y<SELF.top?SELF.direction.y="up":SELF.direction.y=!1,scrollTop("element"),scrollLeft("element"),SELF},FancyScroll.api.moveCursor=function(){function move(type){var rx=(SELF.y.height()-SELF.y.cursor.outerWidth())/SELF.element.wtsX,ry=(SELF.y.height()-SELF.y.cursor.outerHeight())/SELF.element.wtsY;SELF.y.cursor.css({top:SELF[type].scrollTop()*ry}),SELF.x.cursor.css({left:SELF[type].scrollLeft()*rx})}var SELF=this;return move("element"),SELF},FancyScroll.api.delay=function(callback,ms){var SELF=this;clearTimeout(timer),timer=setTimeout(function(){callback.call(SELF)},ms)},FancyScroll.api.timeout=function(callback,ms){var SELF=this;setTimeout(function(){callback.call(SELF)},ms)},FancyScroll.api.scrollEvents=function(){function triggerEvent(type){var event=$.Event({type:SELF.name+":"+type,FancyScroll:SELF,y:SELF.y,x:SELF.x});SELF.element.trigger(event)}var SELF=this;SELF.settings.beforeTop.toString().indexOf("%")>0?100*SELF.element.scrollTop()/SELF.element.wtsY<=parseInt(SELF.settings.beforeTop)&&"up"==SELF.direction.y&&triggerEvent("top"):SELF.element.scrollTop()<=SELF.settings.beforeTop&&"up"==SELF.direction.y&&triggerEvent("top"),SELF.settings.beforeBottom.toString().indexOf("%")>0?100*SELF.element.scrollTop()/SELF.element.wtsY>=100-parseInt(SELF.settings.beforeBottom)&&"down"==SELF.direction.y&&triggerEvent("bottom"):SELF.element.scrollTop()>=SELF.element.wtsY-SELF.settings.beforeBottom&&"down"==SELF.direction.y&&triggerEvent("bottom"),SELF.element.trigger(SELF.name+":scroll"),SELF.element.trigger(SELF.name+":"+SELF.scrollDirection)},FancyScroll.api.debug=function(){this.settings.debug&&console.log(arguments)},Fancy.settings[NAME]={scrollValue:100,margin:0,beforeTop:0,beforeBottom:0,cursorMinHeight:!1,cursorWidth:!1,cursorColor:!1,railColor:!1,mobile:!1,selectEnabled:!0,autoHide:!0,preventDefault:!0,borderColor:!1,borderRadius:!1,smooth:!1,linear:!1,x:!1,y:!0,debug:!1,theme:"default",cursorCursor:"pointer",hideMode:"fade"},Fancy.scroll=VERSION,Fancy.api.scroll=function(settings){return this.set(NAME,function(el){return new FancyScroll(el,settings)})}}(jQuery);
//# sourceMappingURL=fancyscroll.min.js.map