!function(e){function t(t,n){var r=e("#document"==e(t)[0].nodeName?"body":t),a=this;return a.id=s,a.name=i,a.version=o,a.element=r,a.disabled=!1,a.isBody="#document"==r[0].nodeName||"BODY"==r[0].nodeName,a.wrapper=r.parent(),a.timer=[],s++,l||(l=!0,Fancy.version(a)),a.settings=e.extend({},Fancy.settings[i],n),a.direction={},a.init(),a.addEventListener(),a.hideCursor(),a.resize(),a.position(),a}Fancy.require({jQuery:!1,Fancy:"1.0.2"});var s=1,i="FancyScroll",o="1.0.3",n=0,r={},l=!1,a=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;t.api=t.prototype={},t.api.version=o,t.api.name=i,t.api.init=function(){var t=this;t.y=e("<div/>",{id:t.name+"-y-"+t.id,"class":t.name+"-rail "+t.name+"-y-rail"}),t.y.cursor=e("<div/>",{id:t.name+"-y-cursor-"+t.id,"class":t.name+"-cursor"}),t.x=e("<div/>",{id:t.name+"-x-"+t.id,"class":t.name+"-rail "+t.name+"-x-rail"}),t.x.cursor=e("<div/>",{id:t.name+"-x-cursor-"+t.id,"class":t.name+"-cursor"}),t.left=t.element.scrollLeft(),t.top=t.element.scrollTop(),t.element.addClass(t.name+"-element"),(t.settings.mobile?0:Fancy.mobile)?t.element.css({overflow:"auto"}):t.element.css({overflow:"hidden"}),(t.settings.y&&t.settings.mobile?0:Fancy.mobile)||(t.y.append(t.y.cursor),t.wrapper.append(t.y)),t.settings.x&&t.settings.mobile?!0:!Fancy.mobile,t.y.cursor.css({background:t.settings.cursorColor,position:"relative",right:0,border:t.settings.borderColor?"1px solid "+t.settings.borderColor:"",borderRadius:t.settings.borderRadius,cursor:t.settings.cursorCursor}).addClass(t.name+"-theme-"+t.settings.theme+"-cursor"),t.x.cursor.css({background:t.settings.cursorColor,position:"relative",top:0,border:t.settings.borderColor?"1px solid "+t.settings.borderColor:"",borderRadius:t.settings.borderRadius,cursor:t.settings.cursorCursor}).addClass(t.name+"-theme-"+t.settings.theme+"-cursor"),t.y.css({position:t.isBody?"fixed":"absolute",backgroundColor:t.settings.railColor,width:t.settings.cursorWidth}).addClass(t.name+"-theme-"+t.settings.theme+"-rail"),t.x.css({position:t.isBody?"fixed":"absolute",backgroundColor:t.settings.railColor,width:t.settings.cursorWidth}).addClass(t.name+"-theme-"+t.settings.theme+"-rail")},t.api.showCursor=function(e){return this.disabled||!(this.ratioY>1)||e&&"y"!=e||(this.y.removeClass(this.name+"-mode-"+this.settings.hideMode+"-out").addClass(this.name+"-mode-"+this.settings.hideMode+"-in"),this.settings.autoHide&&this.delay(function(){this.y.cursor.active||this.y.cursor.dragged||this.hideCursor()},1e3)),this.disabled||!(this.ratioX>1)||e&&"x"!=e||(this.x.removeClass(this.name+"-mode-"+this.settings.hideMode+"-out").addClass(this.name+"-mode-"+this.settings.hideMode+"-in"),this.settings.autoHide&&this.delay(function(){this.x.cursor.active||this.y.cursor.dragged||this.hideCursor()},1e3)),this},t.api.hideCursor=function(){return this.disabled||(this.y.removeClass(this.name+"-mode-"+this.settings.hideMode+"-in").addClass(this.name+"-mode-"+this.settings.hideMode+"-out"),this.x.removeClass(this.name+"-mode-"+this.settings.hideMode+"-in").addClass(this.name+"-mode-"+this.settings.hideMode+"-out")),this},t.api.disable=function(){return this.hideCursor(),this.disabled=!0,this.y.hide().removeClass(this.name+"-mode-"+this.settings.hideMode+"-in").addClass(this.name+"-mode-"+this.settings.hideMode+"-in"),this.x.hide().removeClass(this.name+"-mode-"+this.settings.hideMode+"-in").addClass(this.name+"-mode-"+this.settings.hideMode+"-in"),this},t.api.enable=function(){var e=this;return e.disabled=!1,e.y.css("display",""),e.x.css("display",""),e},t.api.resize=function(){var e=this;return e.isBody?e.element.wtsY=e.element[0].scrollHeight-window.innerHeight:e.element.wtsY=e.element[0].scrollHeight-e.element.outerHeight(),e.isBody?e.element.wtsX=e.element[0].scrollWidth-window.innerWidth:e.element.wtsX=e.element[0].scrollWidth-e.element.outerWidth(),e.y.css({top:e.element.position().top+parseInt(e.element.css("borderTop")||0)+parseInt(e.element.css("marginTop")||0),height:e.isBody?"100%":e.element.innerHeight()}),e.x.css({left:e.element.position().left+parseInt(e.element.css("marginRight")),width:e.isBody?"100%":e.element.outerWidth()}),e.y.cursor.css({height:e.y.height()-e.y.height()*(e.element.wtsY/e.element[0].scrollHeight),minHeight:e.settings.cursorMinHeight}),e.x.cursor.css({width:e.element.outerWidth()-e.element.outerWidth()*(e.element.wtsX/e.element[0].scrollWidth),minWidht:e.settings.cursorMinHeight}),e.moveCursor(),e.y.wts=e.y.height()-e.y.cursor.outerHeight(),e.x.wts=e.x.width()-e.x.cursor.outerWidth(),e.ratioY=e.element.wtsY/e.y.wts,e.ratioX=e.element.wtsX/e.x.wts,e.ratioY<1?e.y.css("display","none"):e.y.css("display",""),e.ratioX<1?e.x.css("display","none"):e.x.css("display",""),e},t.api.destroy=function(){this.element.removeClass(this.name+"-element"),this.element.css("overflow","").unbind("."+this.name),e(window).unbind("."+this.name),e("html").css({cursor:""}),this.y.remove(),this.x.remove()},t.api.addEventListener=function(){function t(t){if(clearTimeout(s.timer.scroll),s.timer.scroll=setTimeout(function(){i=!1},3),!i)if(i=!0,s.disabled)t.preventDefault();else if(s.settings.mobile?0:Fancy.mobile)s.scrollEvents();else{var n=0;t||(t=window.event),t.wheelDelta?n=t.wheelDelta/120:t.detail&&(n=-t.detail/3);var r=e(t.target).closest("."+s.name+"-element"),l=n>0;Fancy.scrollParent(e(t.target));if(s.settings.preventDefault&&r.length&&!r.is(s.element)){if(s.debug("has fancyscroll"),l&&r.data("FancyScroll").infinite&&r.data("FancyScroll").infinite.last.up)return s.debug("the "+s.name+"-element has infiniteScroll, is currently on way up and is not on top yet"),!0;if(l&&r.scrollTop())return void s.debug("the "+s.name+"-element is currently on way up and is not on top yet");if(!l&&r.scrollTop()<r[0].scrollHeight-r.outerHeight())return s.debug("the "+s.name+"-element is currently on way down and is not on bottom yet"),!0}if(Fancy.mobile){var a=t.touches&&t.touches[0].clientY;l=a>=o,l?s.top&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),s.scrollTo(s.left,s.top-(a-o))):s.top<s.element[0].scrollHeight-s.element.outerHeight()&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),s.scrollTo(s.left,s.top+(o-a))),o=a}else l?s.top&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),s.scrollTo(s.left,s.top-s.settings.scrollValue*n)):s.top<s.element[0].scrollHeight-s.element.outerHeight()&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),s.scrollTo(s.left,s.top+s.settings.scrollValue*-n))}}var s=this,i=0,o=0;if(s.element.on("mouseenter."+s.name,function(){s.disabled||(s.y.addClass("hovered"),s.showCursor())}).on("mouseleave."+s.name,function(){s.y.removeClass("hovered")}).on("touchstart",function(e){o=e.originalEvent.touches[0].clientY}),s.element.on("DOMMouseScroll."+this.name+" mousewheel."+this.name+" MozMousePixelScroll."+this.name+" touchmove."+this.name,function(e){t(e.originalEvent)}),s.element[0].onmousewheel=s.element[0].onmousewheel=t,s.y.on("mouseenter."+s.name,function(){s.y.addClass("hovered"),s.y.cursor.active=!0,s.showCursor()}).on("mouseleave."+s.name,function(){s.y.removeClass("hovered"),s.y.cursor.active=!1}),s.y.cursor.on("mousedown."+s.name,function(t){"use strict";r={},r.start=t.clientY,r.old=t.clientY,s.y.cursor.dragged=!0,s.y.cursor.active=!0,e("html").css({cursor:s.settings.cursorCursor}),r.wts={},r.wts.up=r.start-parseInt(s.y.cursor.css("top"))-2,r.wts.down=r.start+s.y.wts-parseInt(s.y.cursor.css("top"))+2,e(document,"body").on("selectstart."+s.name,function(e){e.preventDefault()})}),e(window).on("mousemove."+s.name,function(e){"use strict";if(s.y.cursor.dragged){var t;t=s.isBody&&!Fancy.isChrome?s.wrapper.scrollTop()+s.element.wtsY/s.y.wts*(e.clientY-r.old):s.element.scrollTop()+s.element.wtsY/s.y.wts*(e.clientY-r.old),s.scrollTo(s.left,Math.round(t)),s.resize(),e.clientY>=r.wts.up&&e.clientY<=r.wts.down&&(r.old=e.clientY)}}),e(window).on("mouseup."+s.name+" touchend."+s.name,function(){"use strict";e(document).unbind("selectstart."+s.name),e("html").css({cursor:""}),r={},s.y.cursor.active=!1,s.y.cursor.dragged=!1}),a){var n=new a(function(e){e.forEach(function(e){s.resize(),s.position()})});n.observe(s.element[0],{subtree:!1,attributeOldValue:!1,attributes:!0,childList:!0,characterData:!0})}s.element.on("DOMAttrModified",function(e){"style"===e.attrName&&(s.resize(),s.position())})},t.api.position=function(){return this.y.css({left:this.element.position().left-this.settings.margin+this.element.outerWidth()-this.y.width()-parseInt(this.element.css("borderRight")||0)+parseInt(this.element.css("marginLeft"))}),this.x.css({top:this.element.position().top-this.settings.margin+this.element.outerHeight()-this.x.height()+parseInt(this.element.css("marginTop"))}),this},t.api.scrollTo=function(e,t,s){function i(t){n[t].scrollLeft(e),n.left=e,n.direction.x&&n.scrollEvents()}function o(e){n[e].scrollTop(t),n.top=t,n.direction.y&&n.scrollEvents()}var n=this;return 0>e&&(e=0),0>t&&(t=0),e>n.element.wtsX&&(e=n.element.wtsX),t>n.element.wtsY&&(t=n.element.wtsY),e>n.left?n.direction.x="right":e<n.left?n.direction.x="left":n.direction.x=!1,t>n.top?n.direction.y="down":t<n.top?n.direction.y="up":n.direction.y=!1,o("element"),i("element"),n.moveCursor(),n.resize(),n.showCursor(),n},t.api.moveCursor=function(){function e(e){var s=(t.y.height()-t.y.cursor.outerWidth())/t.element.wtsX,i=(t.y.height()-t.y.cursor.outerHeight())/t.element.wtsY,o=t.left*s,n=t.top*i;"up"==t.scrollDirection?Math.max(0,o):Math.min(t.x.wts,o),"up"==t.scrollDirection?Math.max(0,n):Math.min(t.y.wts,n);t.y.cursor.css({top:t[e].scrollTop()*i}),t.x.cursor.css({left:t[e].scrollLeft()*s})}var t=this;return e("element"),t},t.api.delay=function(e,t){var s=this;clearTimeout(n),n=setTimeout(function(){e.call(s)},t)},t.api.timeout=function(e,t){var s=this;setTimeout(function(){e.call(s)},t)},t.api.scrollEvents=function(){function t(t){var i=e.Event({type:s.name+":"+t,FancyScroll:s,y:s.y,x:s.x});s.element.trigger(i)}var s=this;s.settings.beforeTop.toString().indexOf("%")>0?100*s.element.scrollTop()/s.element.wtsY<=parseInt(s.settings.beforeTop)&&"up"==s.direction.y&&t("top"):s.element.scrollTop()<=s.settings.beforeTop&&"up"==s.direction.y&&t("top"),s.settings.beforeBottom.toString().indexOf("%")>0?100*s.element.scrollTop()/s.element.wtsY>=100-parseInt(s.settings.beforeBottom)&&"down"==s.direction.y&&t("bottom"):s.element.scrollTop()>=s.element.wtsY-s.settings.beforeBottom&&"down"==s.direction.y&&t("bottom"),s.element.trigger(s.name+":scroll"),s.element.trigger(s.name+":"+s.scrollDirection)},t.api.debug=function(){this.settings.debug&&console.log(arguments)},Fancy.settings[i]={scrollValue:100,margin:0,beforeTop:0,beforeBottom:0,cursorMinHeight:!1,cursorWidth:!1,cursorColor:!1,railColor:!1,mobile:!1,selectEnabled:!0,autoHide:!0,preventDefault:!0,borderColor:!1,borderRadius:!1,smooth:!1,linear:!1,x:!1,y:!0,debug:!1,theme:"default",cursorCursor:"pointer",hideMode:"fade"},Fancy.scroll=o,Fancy.api.scroll=function(e){return this.set(i,function(s){return new t(s,e)})}}(jQuery);
